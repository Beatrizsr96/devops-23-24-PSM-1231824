# Class Assignment Part 2: Building a Spring Boot Project with Gradle

This assignment involves converting the basic version of the Tutorial application to Gradle instead of Maven. It covers tasks such as setting up a Gradle project, managing dependencies, integrating frontend build automation, and executing commands to build and run the application.

## Steps to Complete the Assignment:

1. **Create a New Branch:**
   - Create a new branch named `tut-basic-gradle` in your repository and checkout this branch. This branch will be used for this part of the assignment.

```bash
git branch tut-basic-gradle
git checkout tut-basic-gradle
```

2. **Initialize Spring Boot Project with Gradle:**
   - Use https://start.spring.io to start a new Gradle Spring Boot project with the following dependencies: Rest Repositories, Thymeleaf, JPA, and H2.
   - Extract the generated zip file inside the `CA2/Part2/` folder of your repository.
   - Check available Gradle tasks by executing `./gradlew tasks`.

3. **Prepare the Project Structure:**
   - Delete the `src` folder generated by Spring Initializer.

```bash
rm -rf src
```
   - Copy the `src` folder (and all its subfolders) from the basic folder of the tutorial into the new project folder.

```bash
cp -r path/to/basic/src/
```
   - Copy the files `webpack.config.js` and `package.json` from the basic folder into the new project folder.

```bash
cp path/to/basic/webpack.config.js 
cp path/to/basic/package.json 
```
   - Delete the folder `src/main/resources/static/built/` as it should be generated by Webpack.

```bash
rm -rf src/main/resources/static/built/
```


4. **Manage Frontend Code with Gradle:**
   - Add the Gradle plugin `org.siouan.frontend` to the project to manage frontend code.

```gradle
id "org.siouan.frontend-jdk8" version "6.0.0"
id "org.siouan.frontend-jdk11" version "8.0.0"
id "org.siouan.frontend-jdk17" version "8.0.0"
```

   - Add configuration code in `build.gradle` to configure the plugin for frontend tasks.

```gradle
frontend {
    nodeVersion = "16.20.2"
    assembleScript = "run build"
    cleanScript = "run clean"
    checkScript = "run check"
}
```

5. **Update Package.json Scripts:**
   - Update the scripts section/object in `package.json` to configure the execution of Webpack.

6. **Build and Run the Application:**
   - Execute `./gradlew build` to build the application. Frontend tasks are also executed, and frontend code is generated.
   - Execute `./gradlew bootRun` to run the application.

7. **Additional Gradle Tasks:**
   - Add a task to Gradle to copy the generated JAR to a folder named "dist" located at the project root folder level.

```gradle
task copyJar(type: Copy) {
	from 'build/libs'
	into 'dist'
	include '*.jar'
}
```

   - Add a task to Gradle to delete all files generated by Webpack, usually located at `src/resources/main/static/built/`.

```gradle
task cleanWebpack(type: Delete) {
	delete 'src/main/resources/static/built/**'
}

clean.dependsOn(cleanWebpack)
```

8. **Experiment and Commit:**
   - Experiment with the application and ensure all features work as expected.
   - Commit your code and merge with the master branch.

```bash
git push origin tut-basic-gradle
```

9. **Tag Repository:**
   - At the end of part 2 of this assignment, mark your repository with the tag `ca2-part2`.

 ```bash
git tag ca2-part2
```


During the assignment's development, issues were encountered with the frontend plugin implementation, causing compilation problems for the project. After thorough troubleshooting, was discovered that the plugin wasn't functioning correctly. After integrating the package manager section into the build.gradle file, the project compiled successfully, and the frontend plugin began functioning as intended. Additional tasks were added, such as copyJar and deleteWebpackFiles, without encountering any issues. Subsequently, the project was merged into the master branch. With these updates, we successfully completed the assignment, ensuring all changes were pushed to the repository.

## Alternative implementation solution - Maven

### Analysis
An alternative solution to the assignment would be to use Maven instead of Gradle. Maven is a build automation tool used primarily for Java projects. Maven and Gradle are both build automation tools, but they have different approaches to project configuration and dependency management. Maven relies on XML-based configuration files (pom.xml), while Gradle uses a Groovy-based DSL (Domain Specific Language). The steps to implement the changes using Maven would be:

**Adding Frontend Build Automation:** Maven can handle frontend build automation using plugins like the frontend-maven-plugin, similar to the org.siouan.frontend Gradle plugin. This plugin integrates Node.js and npm into the Maven build process, allowing frontend assets to be managed and built alongside Java code.

**Copying Generated JAR:** Maven's maven-resources-plugin can be used to copy the generated JAR file to a specified directory. This plugin allows for copying resources during the build process, which can include the JAR file produced by the Maven build.

**Cleaning Webpack-generated Files:** Maven's maven-clean-plugin can be configured to delete specific files or directories, such as Webpack-generated files in the src/resources/main/static/built/ directory. This plugin ensures that the project is cleaned before the clean task is executed.


### Implementation 
To achieve the same goals as presented in the assignment using Maven, we would follow a similar approach but with Maven-specific configurations:
#### 1. Create a new Maven project
```bash
mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-app -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false
```

#### 2. Frontend Integration
**Frontend Plugin:** 
- To integrate and manage frontend tasks, the `frontend-maven-plugin` was utilized. It was configured to install Node and npm, run npm install, and execute Webpack builds.
  
    ```xml
    <plugin>
        <groupId>com.github.eirslett</groupId>
        <artifactId>frontend-maven-plugin</artifactId>
        <version>1.9.1</version>
        <configuration>
            <nodeVersion>v16.13.0</nodeVersion>
            <npmVersion>6.14.8</npmVersion>
        </configuration>
        <executions>
            <execution>
                <goals>
                    <goal>install-node-and-npm</goal>
                    <goal>npm</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
    ```
**Webpack and `package.json`:**
- The same `package.json` configurations were applied to facilitate npm scripts for building and cleaning the frontend.

#### 3. Packaging for Distribution
**Maven Assembly Plugin:** 
- The Maven Assembly Plugin was configured to package the application into a distributable JAR, including all its dependencies.
    ```xml
    <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <configuration>
            <descriptorRefs>
                <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>
            <archive>
                <manifest>
                    <mainClass>com.example.Application</mainClass>
                </manifest>
            </archive>
        </configuration>
    </plugin>
    ```

### 4. Copy the generated jar file to the target directory
**Maven Resources Plugin:** 
- Used to copy the generated JAR file to the target directory.
    ```xml
    <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>3.2.0</version>
        <executions>
            <execution>
                <id>copy-resources</id>
                <phase>package</phase>
                <goals>
                    <goal>copy-resources</goal>
                </goals>
                <configuration>
                    <outputDirectory>${project.build.directory}/target</outputDirectory>
                    <resources>
                        <resource>
                            <directory>${project.build.directory}</directory>
                            <includes>
                                <include>*.jar</include>
                            </includes>
                        </resource>
                    </resources>
                </configuration>
            </execution>
        </executions>
    </plugin>
    ```

#### 5. Cleaning Up Webpack Artifacts
**Maven Clean Plugin:** 
- Customized to remove the Webpack-generated files before the clean process.
    ```xml
    <plugin>
        <artifactId>maven-clean-plugin</artifactId>
        <version>3.1.0</version>
        <configuration>
            <filesets>
                <fileset>
                    <directory>src/main/resources/static/built</directory>
                </fileset>
            </filesets>
        </configuration>
    </plugin>
    ```

#### 6. Compile the project

```bash
mvn clean install
```

#### 7. Add all the files to the staging area

```bash
git add .
```

#### 8. Commit the changes

```bash
git commit -m "Added the Maven build automation tool"
```

#### 9. Push the changes to the repository

```bash
git push
```

By following this approach, you can achieve the same goals as presented in the assignment using Maven as an alternative to Gradle for build automation.
